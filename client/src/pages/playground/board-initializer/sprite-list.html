<template>
<require from="../../../utils/custom-elements/image-gallery"></require>
<require from="./sprite-picker"></require>
<require from="./animation-creator"></require>

<!--Sprites List-->
<div class="row">
  <div repeat.for="sprite of sprites">
    <div class="col-md-2">
      <div class="panel" class.bind="sprite.active ? 'panel-primary' : 'panel-default'" click.delegate="board.setActiveObject(sprite)">
        <div class="panel-body" style="height: 80px; text-align: center; overflow: hidden;">
          <span if.bind="sprite.spritesheet" class="glyphicon glyphicon-play-circle" aria-hidden="true" style="position: absolute; right: 16%; top: 5%"></span>
          <img src.bind="sprite._element.src" class="img-responsive" style="margin: 0 auto; height: 50px;" alt="sprite.name">
          <span if.bind="sprite.grpName" style="font-size: 10px; margin: -15px; white-space: nowrap;">${ board-init.group & t}: ${sprite.grpName}</span>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <button type="button" class="btn btn-default add-sprite" click.delegate="openSpriteGallery()"><span class="glyphicon glyphicon-plus" style="font-size: 25px"></button>
  </div>
</div>

<div repeat.for="sprite of sprites">
  <!--Sprite Properties-->
  <div class="well" show.bind="sprite.active && !severalObjectsSelected">
    <!--Sprite name and deleteBody btn-->
    <div class="form-inline">
      <label>${ 'board-init.spriteName' & t }</label>
      <input type="text" class="input-sm" class="form-control" value.bind="sprite.data.name & validateOnChange" style="margin-left: 10px;">
      <button type="button" class="btn btn-default pull-right" style="margin-top: -3px;" click.delegate="deleteSprite(sprite)">${ 'board-init.delSprite' & t}</button>
    </div>
    <div if.bind="controller.errors">
        <span class="help-block" repeat.for="error of controller.errors">${error.message}</span>
    </div>
    <hr>

    <!-- Nav tabs -->
    <ul class="nav nav-pills custom-nav" role="tablist">
        <!--<li role="presentation" class="active"><a href.bind="'#props-'+sprite.id" aria-controls="tab1" role="tab" data-toggle="tab">Properties</a></li>
        <li role="presentation" if.bind="sprite.spritesheet"><a href.bind="'#anim-'+sprite.id" aria-controls="tab2" role="tab" data-toggle="tab">Costumes &amp; Animations</a></li>-->
    </ul>

    <!-- Tab panes -->
    <div class="tab-content" style="margin: 10px;">
        <!-- Tab 1 -->
        <!--<div role="tabpanel" class="tab-pane active" id.bind="'props-'+sprite.id">
            <div class="row">
                <div>Key: ${sprite.key}</div>
                <div>Height: ${sprite.height * sprite.scaleY}</div>
                <div>Width: ${sprite.width * sprite.scaleX}</div>
                <div>x: ${sprite.left}</div>
                <div>y: ${sprite.top}</div>
                <div>orientation: ${sprite.angle}</div>
            </div>
            <br>
            <div class="row">
              Enable Controls:
              <input type="checkbox" checked.bind="sprite.controls.enabled">
            </div>
        </div>-->
        
        <!-- Tab 2 -->
        <!--<div if.bind="sprite.spritesheet" role="tabpanel" class="tab-pane" id.bind="'anim-'+sprite.id">
            <div class="row">
              Default costume:
              <sprite-picker sprite.bind="sprite.spritesheet"></sprite-picker>
            </div>
            <div class="row">
              Animations:
              <animation-creator spritesheet.bind="sprite.spritesheet"></animation-creator>
            </div>
        </div>-->
    </div>

  </div>
</div>

<!--Group Properties-->
<div class="well" if.bind="severalObjectsSelected">
  <div>
    <input type="text" class="input-sm" class="form-control" value.bind="currentGroupName" disabled.bind="existingGroup">
    <button if.bind="!existingGroup && !subGroup" type="button" class="btn btn-default" style="margin-top: -2px;" click.delegate="createGroup()" disabled.bind="notFromSameGroup">Create Group</button>
    <button if.bind="existingGroup || subGroup" type="button" class="btn btn-danger" style="margin-top: -2px;" click.delegate="deleteGroup()" disabled.bind="subGroup">Delete Group</button>
    <!--<button type="button" class.bind="existingGroup ? 'btn btn-danger' : 'btn btn-default'" class style="margin-top: -2px;" click.delegate="createGroup()">${existingGroup ? "Delete Group" : "Create Group"}</button>-->
    <button type="button" class="btn btn-default pull-right" style="margin-top: -2px;" click.delegate="deleteSelectedObjs()">Delete Bodies</button>
  </div>
</div>

</template>
